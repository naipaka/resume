# これまでに苦労したこと、乗り越えたこと

以下に、これまでの経験の中で特に苦労したことや乗り越えたことをまとめています。

## ジュニアエンジニアの教育とサービス開発の両立

### 背景

小規模な自社開発チームにて、Flutter 未経験のジュニアエンジニアを戦力化しながら、新規サービスの機能開発を同時に進める必要がありました。
開発と教育を並行で進める難しさの中で、プロダクトの品質・スピードを保ちつつ、本人の成長支援にも全力で取り組みました。

### 発生した課題

- PR レビューの往復が増え、Issue の消化スピードが大幅に低下
- テキストベースのやり取りでは背景が伝わらず、理解・習得にも時間がかかっていた
- 指摘が多くなるとモチベーションが下がるリスクもあり、心理的なケアも必要だった
- 技術だけでなく、「働き方」や「質問の仕方」などの基本的なスキルの育成も求められた

### 取った行動

#### ペアプロ＆モブプロレビューの導入

- PR を確認後、画面共有しながら自分で修正実演＋リアルタイム解説を実施
- 「テキストだと背景が伝わらない」「大量の指摘はストレスになるかも」といった課題に対する仮説からアプローチ
- 効果：レビューのワンラリー化で Issue の消化速度が向上
- デメリット：レビュアの負担が増加

#### 5日間の短期集中・毎日フィードバック育成の実施

- 朝と夕方に振り返りを行い、「今日できたこと／明日やること」を明確化
- 以下のテーマで日ごとに段階的な指導を実施：

Day 1：目的のすり合わせ・質問の仕方改善・PR レビューの指摘の認識ズレ矯正
Day 2：命名の基準と判断軸・セルフレビューの仕方確認
Day 3：習慣の定着を確認・技術課題把握・レビュー粒度の調整
Day 4：キャリア観のすり合わせ・レビュー目的の理解・文章力
Day 5：自己管理の仕組み化・自走促進

- 質問テンプレを一緒に作成し、「質問の仕方」そのものを日々改善

#### コード品質を担保する仕組みづくり

- `altive_lints` パッケージによくある指摘を Custom Lint として実装
- PR レビューコストを削減し、CI でも検知可能にしたことで、属人的な指摘の回避＆自動化を実現

#### 教育フローの仕組み化

- 質問テンプレートや課題表を作成し、成長の進捗や必要スキルを可視化  
- Issue には事前に細かい実装手順を書き、迷いを最小限に抑える運用も実施  

### 結果

- 1 週間での Issue 消化数が平均 1〜2 件から 3〜4 件に増加し、PR マージまでの所要時間も 2〜3 日から 1 日以内に短縮された
- `altive_lints` はチーム外でも使われるなど、副次的な広がりも生まれた
- 本人の自信やスキル向上にもつながり、継続的に自走できる状態へ段階的に移行

### 学び・得られたこと

- 教育と開発の両立は「時間」と「コスト」のトレードオフが重要
- ジュニアの育成には「技術」と「感情」の両面アプローチが不可欠
- レビューや教育を一時的な対応にせず、継続可能な仕組みとして残す意識が重要
- 自分自身も、「教える側」としての言語化スキルと観察力を大きく伸ばす経験を得た

---

## 通知を受け取った後の画面遷移が一部端末で動作しない問題に対応

### 背景

toC 向けの受託開発アプリにて、特定ユーザーでのみ通知を受信後に画面遷移用のダイアログが表示されないという問題が発生。
チーム内では再現できなかったが、クライアント側（顧客の代表）の実機でのみ発生していることがわかり、対応が急務となった。
Flutter で実装されており、通知は Firebase Cloud Messaging（FCM）を使用していた。

### 発生した課題

- iOS/Android の一部実機で、バックグラウンド通知受信後の処理が実行されない
- 特に iOS ではバックグラウンドでのハンドリングはデバッグでは確認不可
- Android では初回通知は成功するが、2 回目以降は処理されない
- エラーログも出力されないため、原因の特定が難しかった

### 取った行動

#### iOS対応

- Mac の Console アプリから実機ログを取得し、バックグラウンドで通知が処理されていないことを確認
- 原因仮説 1：初期化のタイミングが遅い
  - Firebase 公式ドキュメントでは、`Firebase.initializeApp()` より前に通知ハンドラの初期化をしていた
  - 実装では非同期初期化の後に記述されていたため、順序を修正
- 原因仮説 2：通知パッケージのバグ
  - issue は見つからなかったが、最新版にアップデートしたところ正常に動作
- 2 つの対応を組み合わせたことで問題を解消

#### Android対応

- Logcat で確認したところ、初回通知だけは正常動作し、2 回目以降は無反応
- GitHub で調査したところ、同様の報告があり、Google Play 開発者サービス側の仕様変更が原因であることが判明
  - アプリに代わって Google Play 開発者サービスによって通知が表示
- 対応策として以下の 2 つを検証：
  1. `AndroidManifest.xml` への設定 → 効果なし
  2. 通知 payload への Android 固有の設定追加 → Postman での動作確認で効果あり
- サーバー側に必要な payload 情報を共有し、実装を依頼

### 学び・得られたこと

- 再現性の低い問題にも「仮説を立てて検証→切り分け→対応」を冷静に積み重ねるスキルが身についた
- 通知処理に関して、公式ドキュメントの順守と仮説検証型の調査が有効であることを再確認
- Postman を用いた FCM の直接叩き込みや、GitHub での検索スキルが課題解決に有効だった
- 再発防止のため、初期化順序のベストプラクティスを社内ドキュメントにまとめて共有
- 修正内容に対して感謝の声ももらい、一定の信頼獲得にもつながった

---

## 動画生成ロジックをサーバーからアプリ内へ緊急切り替え

### 背景

家庭菜園をサポートする自社アプリで、日記に添付された画像を連結して動画化する「タイムラプス機能」を実装していた。
当初はサーバーサイドで `ffmpeg` を使って動画を生成し、アプリにダウンロードさせる方式を採用していた。

### 発生した課題

- 機能としては完成していたが、`ffmpeg` には商用利用に制限がある可能性があることが発覚
- ライセンスに関する情報を収集した結果、リスクを回避するためにアプリ内実装へ切り替える必要があると判断
- 動画生成処理をアプリ側でネイティブ実装する必要があり、Flutter からのブリッジやプラットフォームごとの対応が必要だった

### 取った行動

- iOS では AVFoundation、Android では MediaCodec を用いた動画生成処理をネイティブで実装
- 初の本格的なネイティブ実装だったため、Apple/Google の公式ドキュメントや海外記事を調査しながらキャッチアップ
- Flutter プロジェクトは Monorepo 構成だったため、タイムラプス生成機能をパッケージとして切り出し依存関係を整理
- pigeon を使って Flutter とネイティブ間の通信を実装
- 各種動作確認やメモリ使用量・処理速度の最適化を行い、無事にリリース

### 結果

- タイムラプス機能は、家庭菜園の成長過程を可視化できる目玉機能としてユーザーへの価値提供に貢献
- サーバー依存なしに動画生成を完結できる実装に切り替え成功
- 商用リスクを排除しつつ、機能価値も維持したままスムーズにリリースに至った
- 得られた知見は Zenn 記事としてアウトプットし、社内外で共有
- Flutter×ネイティブ連携の経験が深まり、他プロジェクトにも応用可能な技術資産となった

### 学び・得られたこと

- プラットフォームごとの実装差異や Flutter との連携に直面することで、抽象化・再利用を意識した設計思考が強化された
- 今後も Flutter でネイティブ機能が必要な場面で、早期に調査・実装まで持ち込む対応力に活かすことができると実感した

---

## GitHub ActionsからXcode Cloudへの切り替えでCDの安定運用を実現

### 背景

Flutter 製アプリの CI/CD 環境構築を GitHub Actions で行っていたが、継続的なデプロイの信頼性を担保しながら効率よく運用することが求められていた。
主に自社アプリや受託アプリで活用しており、開発効率と品質を両立するための基盤として重要な位置付けだった。

### 発生した課題

- ある時点から GitHub Actions 上で Xcode ビルドが失敗する不明なエラーが発生
  - Xcode 13 ではビルド成功するが、Xcode 14 では失敗
- ログを追っても原因不明で、情報も公式・コミュニティ含めて見つからず
- チーム全体のリリースサイクルに影響し、開発集中が困難になる状態に陥った

### 取った行動

- 原因の調査と並行して、「目的は CD の安定運用であり、手段に固執すべきでない」と判断
- Apple 公式の Xcode Cloud の導入を検討し、実験的に移行を開始
- GitHub Actions で担っていた処理と比較しながら、差分と制約を把握
- ワークフロー手順の社内共有資料作成、リリースフローの検証を実施
- 他エンジニアも使えるようなナレッジを Zenn スクラップや記事で公開

### 結果

- 安定した CD 環境が再構築され、現在まで安定運用中
- CI/CD に対するチーム全体の信頼感が回復し、開発スピードも維持できるようになった
- フローのドキュメント化・ナレッジ展開により、他チームでも流用可能な構成となった
- Flutter Tokyo で登壇し、得られた知見を外部にも還元
- GitHub Actions では macOS ビルドによる課金が発生していたが、Xcode Cloud では無料枠内に収まり、クライアントにとってもコスト削減につながった
- スクラップや記事で背景や設定の意図をドキュメント化したことで、他メンバーでもメンテナンス・運用がしやすくなり、チーム全体での継続的な活用が可能になった

### 学び・得られたこと

- 「目的から逆算して柔軟に手段を変える判断」ができた経験
- CI/CD の仕組みは技術的な構築力だけでなく、「運用のしやすさ」や「信頼性」まで含めて設計することの重要性を実感

---

## アプリ誕生日イベント機能を期日厳守で段階リリース

### 背景

toC 向けの受託開発アプリにて、アプリの「誕生日」を記念したイベント機能を追加することになった。
クライアントの強い希望により、イベント当日までに機能をリリースすることが必須条件となっていた。
アプリ・サーバー両方の実装が必要な中で、納期・品質・仕様変更にどう対応するかがポイントだった。

### 発生した課題

- 機能の実装期限が「◯月◯日まで」と確定していた
- イベント仕様に変更が入り、実装量が想定より増加
- サーバーサイド側の設計・実装が遅れており、アプリ側の開発が先行しづらい状態

### 取った行動

- アプリ側で主導して、必要な API 仕様を先に定義し、エンドポイントとレスポンス形式をサーバーに提示
- 設計と並行してアプリ実装を進める「非同期開発」を採用
- 全体の機能を「イベント当日までに必要なもの」と「後からでも問題ないもの」に分類
- イベント当日に必須の機能のみを先行してリリースする段階リリース戦略を提案
- 仕様変更にも対応しつつ、当日に間に合わせることを最優先に設計を柔軟に調整

### 結果

- イベント当日に、必要な機能を無事リリース
- 仕様変更による遅延リスクを回避し、段階リリースにより開発負荷を分散
- クライアントからも感謝の言葉をもらい、信頼関係がより強化された

### 学び・得られたこと

- 実装・設計だけでなく「段階的に価値を届ける」判断が重要な案件だった
- 納期が厳しいプロジェクトでも、要件整理と段階リリースの提案ができれば、品質も信頼も落とさずリリースできると実感した経験
